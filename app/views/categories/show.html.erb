<p id="notice"><%= notice %></p>

<table>
  <tbody>
  <% @category.subcategories.each do |subcategory| %>
    <tr>
      <td><%= link_to subcategory.label, subcategory %></td>
      <td><%= link_to 'Edit', edit_category_path(subcategory) %></td>
      <td><%= link_to 'Destroy', subcategory, method: :delete, data: {confirm: 'Are you sure?'} %></td>
    </tr>
  <% end %>
  </tbody>
</table>
<table>
  <tbody>
  <% @category.products.each do |product| %>
    <tr>
      <% if product.variants.size == 1 %>
        <td><%= link_to product.variants.first.name, product.variants.first %></td>
        <td><%= link_to 'Edit', edit_variant_path(product.variants.first) %></td>
        <td><%= link_to 'Destroy', product.variants.first, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      <% else %>
        <td><%= link_to product.name, product %></td>
        <td><%= link_to 'Edit', edit_product_path(product) %></td>
        <td><%= link_to 'Destroy', product, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      <% end %>
    </tr>
  <% end %>
  <% if (@category.subcategories.first == nil) && (@category.products.first == nil) %>
    There are no products right now!
  <% end %>
  </tbody>
</table>
<br>
<%= link_to 'Edit', edit_category_path(@category) %> |
<%= link_to 'Back', categories_path %> |
<%= link_to 'New Product', new_product_path %> |

<br>
<br>

<%= link_to 'Main Categories', categories_path %> |
<%= link_to 'Products', products_path %>